[tox]
envlist = py310,py311,py312,py313,py314,lint,type-check,coverage
isolated_build = true

[testenv]
deps = 
    pytest>=8.0.0
    pytest-cov>=4.0.0
commands = pytest {posargs}

[testenv:lint]
deps = 
    ruff>=0.8.0
commands = ruff check .

[testenv:type-check]
deps = 
    ty>=0.1.0
commands = ty src/

[testenv:coverage]
deps = 
    pytest>=8.0.0
    pytest-cov>=4.0.0
commands = 
    pytest --cov=src --cov-report=html --cov-report=term-missing
    coverage html

[testenv:matrix]
deps = 
    pytest>=8.0.0
    pytest-cov>=4.0.0
commands = pytest --cov=src --cov-report=xml

[testenv:format]
deps = 
    ruff>=0.8.0
commands = ruff format .